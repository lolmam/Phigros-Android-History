<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Phigros Android History</title>
  <link rel="stylesheet" href="style/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Exo:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="style/1.X.N.png">
</head>
<body>
  <div class="background"></div>

  <header>
    <nav>
      <ul>
        <li><a href="" class="active">Home</a></li>
        <li><a href="versions">Versions</a></li>
        <li><a href="install">Install Guide</a></li>
      </ul>
    </nav>
  </header>

  <main class="container">
    <h1>Phigros Android Versions</h1>
    <p>Welcome to the fan made archive of almost every <strong>Phigros</strong> Android version. 
      Find available versions, changelogs, and installation help for <strong>Google Play,</strong> <strong>TapTap</strong> and other versions.</p>
    <p id="download-count">Loading downloads...</p>

	<section class="archive-stats">
	  <h2>Archive Summary</h2>
	  <p>Total versions released: <strong>124</strong><br>Versions found: <strong>115</strong></p>
		<p>
		  <button class="home-dropdown-toggle">
			<span class="arrow-left">&#9654;</span>
			<span>Versions missing</span>
			<span class="arrow-right">&#9664;</span>
		  </button>
		</p>
		<div id="missing-versions" class="home-dropdown-content">
		  <code>1.2.1, 1.2.2, 1.2.3, 1.2.5, 1.5.3, 1.5.5, 2.4.1, 2.4.2, 2.5.0</code>
		</div>
	  <p>Latest version: <strong><a href="versions/versions_3.x#v3-15-1" class="active">3.15.1 (132)</a></strong> - 28/Aug/2025<br>Updates are usually released every Wednesday at 09:00 AM UTC.</p>
	</section>

    <div class="cta-buttons">
      <a href="versions" class="btn">View Versions</a>
      <a href="install" class="btn alt">How to Install</a>
    </div>
  </main>

  <footer>
	<a href="https://gitlab.com/lolmam/Phigros-Android-History/-/blob/main/NOTICE.md">Phigros Android History</a> © 2024 – 2025 by lol.mam is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>
    <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" alt="CC" style="max-width: 1em; max-height:1em; margin-left: .2em;">
    <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" alt="BY" style="max-width: 1em; max-height:1em; margin-left: .2em;">
    <img src="https://mirrors.creativecommons.org/presskit/icons/nc.svg" alt="NC" style="max-width: 1em; max-height:1em; margin-left: .2em;">
    <img src="https://mirrors.creativecommons.org/presskit/icons/sa.svg" alt="SA" style="max-width: 1em; max-height:1em; margin-left: .2em;">
  </footer>

  <script>
    // Download count fetch
    fetch("https://files.phigros.lolmam.top/stats")
      .then(res => res.text())
      .then(text => {
        document.getElementById("download-count").innerText = text;
      })
      .catch(err => {
        document.getElementById("download-count").innerText = "Couldn't load download count.";
        console.error("Failed to load count:", err);
      });

	// homepage collapsible toggles
	const homeToggle = document.querySelector(".home-dropdown-toggle");
	if (homeToggle) {
	  const content = document.getElementById("missing-versions");
	  homeToggle.addEventListener("click", () => {
		const isOpen = homeToggle.classList.toggle("open");
		content.style.display = isOpen ? "block" : "none";
		homeToggle.setAttribute("aria-expanded", isOpen ? "true" : "false");
		content.setAttribute("aria-hidden", isOpen ? "false" : "true");
	  });
	}
	
	// short url for jumping to versions
	document.addEventListener("DOMContentLoaded", () => {
	  const allowedMajors = ["1", "2", "3"];
	  const hash = window.location.hash.trim();
	  if (!hash.startsWith("#v")) return;
	  const fullMatch = hash.match(/^#v(\d+)-(\d+)-(\d+)$/);
	  const majorMatch = hash.match(/^#v(\d+)$/);
	  let target = null;
	  let major = null;
	  if (fullMatch) {
		major = fullMatch[1];
		if (allowedMajors.includes(major)) {
		  target = `/versions/versions_${major}.x/${hash}`;
		}
	  } else if (majorMatch) {
		major = majorMatch[1];
		if (allowedMajors.includes(major)) {
		  target = `/versions/versions_${major}.x/`;
		}
	  }
	  if (target) {
		window.location.replace(target);
	  } else {
		window.location.replace("/404.html");
	  }
	});
  </script>
</body>
</html>
